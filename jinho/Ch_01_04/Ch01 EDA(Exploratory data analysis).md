# Ch01 EDA(Exploratory data analysis)

- 고전 통계학 추론을 가지고 모집단의 대한 결론을 도출하기 위한 일련의 복잡한 과정에 관해 다루었다.
- 통계적 추론을 하나의 구성요소로보는 data analysis를 제안
    - EDA정립
        - Exploratory Data Analysis(참고)
            - summary statiscs(mean, median, quantile)과 데이터 집합을 기림으로 표나하는데 도움되는 box plot, scatter plot제시

# 1.1 정형화된 데이터의 요소

- 수 많은 소스로부터 데이터 얻음
    - ex) 센서측정, 이벤트 ,텍스트, 이미지, 비디오, 음성 기타 등등
- 대부분의 데이터는 **정형화되어 있지 않**다.
    - 이미지는 RGB로 표현할 수 있는 픽셀들의 집합체라고 할 수 있음
    - 텍스트 단어, 무의미한 문자를 순서대로 나열한 배열
    구문과 하위 구문으로 이루어진다.
    - 방문내역 정보
        - 웹페이지 이용, 반응들을 배열형태로 모아놓음

- **데이터 과학에서 가장 중요한 도전은 수많은 raw data를 활용 가능한 형태의 정보로 변환하는 것**
- **통계적 개념**을 **활용**하기 위해 **raw data를 가공**하여 **정형화된 형태로 변환**
    - **일반적인 형태**는 **행**과 **열**로 이루어진다.
- **정형 데이터의 가장 기본**이 되는 **2가지**
    - **수치형** 데이터

        숫자를 이용해 표현가능 데이터(온도, 주식, 시간, 점수)

        - **연속형** 데이터
            - 풍속, 지속시간
        - **이산** 데이터
            - 사건의 발생 빈도
    - **범주형** 데이터

        가능한 범주 안의 값만을 취할 수 있는 데이터(바나나, 사과, 토마토, 복숭아)

        - **이진** 데이터
            - yes or no, 1/0
        - **순서형** 데이터(Ordinal, ordered factor)
            - 평점(1~5)

- **범주형**(**Categorical**)
    - 숫자 문자의 집합일 수
        - 데이터베이스 내부적으로 자동처리
        - 데이터가 문자열인지 아니면 일정한 범위가 주어진 범주형인지 확실히 구분하면
            - 차트생성, 모델 피딩 등 통계분석을 수행하는 방식을 결정하는데 큰 도움을 준다.
            - 관계형 데이터베이스에서처럼 저장소, 인게싱을 최적화하는데 사용한다.
            - 범주형 변수가 취할 수 있는 값들은 소프트웨어적으로 처리가 가능하다.

# 1.2 테이블 데이터

데이터 분석 가장 대표적인 object 형태

- 테이블 데이터(**rectangular data**)

    기본적으로 각 레코드(사건)을 나타내는 행, 피처(변수)를 나타내는 열로 이루어진 2차원 행렬

- 데이터 프레임(data frame)
    - R, python 특정 데이터 포맷

- 문자열 같은 비정형 데이터는 테이블 데이터의 피처 형태로 표현되도록 처리해야한다.

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled.png)

- table 1-1 횟수, 측정값 나타내는 데이터, 범주형 데이터 등 여러 데이터 종류가 섞임
- 맨 오른쪽열 경매에 경쟁이 있는지 없는지 나타내는 이진변수
- **만약 경매 경쟁 여부 예측하고자 할때 indicator variable ⇒ outcome variable**

## 1.2.1 데이터 프레임과 인덱스

- 데이터 베이스에서는 1개 혹은 그 이상의 열(특성, 변수)를 인덱스로 지정한다.
    - 데이터 베이스의 퀴리 성능을 크게 향상 가능
    - 파이썬 pandas에서 테이블 구조의 DataFrame 객체를 제공한다.
    - pandas 다중, 계측정 인덱스 설정가능 복잡한 동작 효율적으로 처리할 수 있게한다.
    - R data.frame

```
💡 **용어차이**
- **response variable** == **dependent vaiabe** == **predictor vaiable**
- 컴퓨터과학에서 1개 행을 샘플이라 부르고 
  통계학자는 여러행 집합을 샘플이라 부르기도한다.
```

## 1.2.2 테이블 형식이 아닌 데이터 구조

- **시계열 데이터**

    **동일한 변수 안에 연속적인 측정값**을 갖는다.

    사물 인터넷과 같이 다양한 디바이스에서 생산되는 데이터들에서 중요한 요소이다.

- **공간데이터**

    지도제작, 위치정보 분석에 사용됨

    - 객체 표현시 어떤 객체(ex) 주택)와그것의 공간 좌표가 데이터의 중심이 된다.
    - field정보는 공간을 나타내는 작은 단위들과 적당한 측정 기준값에 중점을 둔다.
- **그래프 데이터**(or 네트워크)
    - **물리적** 관계
        - 도로
    - **사회적** 관계
        - 페이스북, 링크드인 등 SNS
    - **추상적인** 관계
        - 네트워크

- **통계학에서의 그래프**
    - 다양한 도표와 시각화 방법을 의미
- **컴퓨터 과학에서의 그래프**
    - 어떤 개체들 사이의 연결관계를 묘사

# 1.3 위치 추정

데이터 표현 변수 보통 수천가지 다른 값

데이터를 살펴보는 가장 기초적인 단계

- 각 피처(특성, 변수)의 대푯값(typical value)을 구한다.
    - 대부분의 값이 어디쯤 위치하는지 중심경향성을 나타내는 추정값
- 데이터 요약은 평균만으로 되지 않는다. 다른 값들이 필요하기도 하다.
    - 평균, 중간값 등

## 용어정리

- **mean(= average,** 평균**)**
    - 모든값의 총합을 나눈 값
- **weighted mean(**가중 평균**)**
    - 가중치를 곱한 값의 총합을 가중치의 총합을 나눈 값
- **median(50th percentile)**
    - 데이터 가장 가운데 위치한 값
- **percentile(quatile, 백분위수)**
    - 전체 데이터의 P%를 아래에 두는 ㄱ밧
- **weighted median(가중 평균값)**
    - 데이터를 정렬한 후 각 가중치 값을 위에서부터 더할 떄, 총합의 중간이 위치하는 데이터 값
- **trimmed mean(절사평균)**
    - 정해진 개수의 극단값(extrem value)를 제외한 나머지 값들의 평균
- **robust(resistant)**
    - 극단값들에 예민하지 않다는 것을 의미
- **outlier**
    - 대부분의 값과 매우 다른 데이터 값
    - 대부분이 5~10일때 100 이런식으로 멀리 떨어진 값

## 1.3.1 평균

모든값의 총합을 나눈 값

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%201.png)

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%202.png)

- **절사평균(Trimmed mean)**

    크기순으로 정렬한 뒤 양끝에서 일정 개수의 값들을 삭제한 뒤 남은 값들을 가지고 구한 평균

    - 양 극단값의 영향을 제거한다.
        - 피겨 최고, 최저점 제거와 비슷하다 생각

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%203.png)

- **가중평균(weighted mean)**

    가중치를 곱한 값의 총합을 가중치의 총합을 나눈 값

    가중평균 사용하는 2가지 이유

    1. 어떤 값들이 본래 다른 깂들에 비해 큰 변화량을 가질때 관측값에 대해 저 작은 가중치를 줄수 있다.
        - 여러 센서에서 가져온 데이터의 평균보다 한 센서의 평균이 낮다면
        해당 센서 가중치를 낮게 준다.(정확도 향상을 위해)
    2. 데이터를 수집할때 관심있는 서로 다른 대조군에 대해 항상 같은수가 얻어지지 않는 단점
        - 보정을 위해 적은 수인 것에 가중치를 더 크게 준다.

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%204.png)

## 1.3.2 중간값과 로버스트추정

- **median**(중앙값)
    - 데이터 일렬로 정렬했을때 정가운데 위치하는 값
    - 데이터 갯수가 짝수이면 가운데 두 값의 평균으로 정함
    - 위치한 값들만으로 정해진다.
    - 데이터에 민감한 평균보다 **위치 추정**에 **유리**
        - 특이값의 여부와 상관없이 중간값은 비슷하게 나오게된다.
    - 가중 중간값 사용가능
        1. 데이터 정렬
        2. 각 데이터 값은 해당하는 가중치를 가짐
        3. 단순히 중간에 위치한 값이 아니라
        어떤 위치를 기준으로 상위 절반의 가중치의 합이 하위 절반의 가중치의 합과 동일한 위치의 값이 된다.
        4. **역시 robust함 (특이값이 영향이 적다)**
- **outlier(**특이값, 극단값**)**

    다른 값들과 매우 멀리 떨어져 있는 값들을 말한다.

    - 동네축구 선수 중 메시가 껴있는 경우
        - 메시의 골 수는 다른 사람의 골 수보다 훨씬 많아서 특이값이 된다
        - 평균에 왜곡발생

중간값만이 로버스트한 위치를 추정하는 방법은 아니다.

절사평균 역시 특잇값 영향을 줄이기 위해 많이 쓰인다.

테이터 상하위 10퍼 잘라내기

데이터가 충분하다면 특잇값만 내보내면서 특징을 표현할 수 있다.

절사평균은 데이터 특잇값들에 로버스트하지만 위치 추정을 위해 더 많은 데이터를 사용한다.

## 1.3.3 예제: 인구에 따른 살인 비율의 위치 추정

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%205.png)

![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%206.png)

```r
state <- read.csv('state.csv')
mean(state[['Population']], trim=0.1)
mean(state[['Population']])

```

```python
state <- read.csv('state.csv')
state['Population'].mean()
trim_mean(state['Population'], 0.1)
state['Population'].median()
```

평균이 절사평균보다 크고

절사평균은 중간값보다 크다.

# 1.4 변이 추정

- **variability**
    - 데이터 값이 얼마나 밀집해 있는지 혹은 퍼저 있는지 나타내는 산포도를 나타낸다.
    - 실제 변이와 랜덤 구분
    - 실제 변이의 다양한 요인들을 알아보고 변이가 있는 상황에서 결정을 내리는등
    - 통계의 핵심에 variability가 있다.

    ## 용어정리

    - **deviation(편차)**
        - 관측값과 위치 추정값 사이의 차이(오차, 잔차)
    - **variance(분산)**
        - 평균과의 편차를 제곱한 값들의  합을 n-1로 나눈 값, n은 데이터 개수(유의어: 평균제곱오차)
    - **standard deviation(표준편차)**
        - 분산의 제곱근
    - **mean absolute deviation(평균절대편차)**
        - 평균과의 편차의 절댓값의 평균(L1 norm, 맨해튼 norm)
    - **MAD(중간값의 중위절대편차)**
        - 중간값의 편차의 절댓값의 중간값
    - **range(범위)**
        - 데이터의 최댓값과 최솟값의 차이
    - **order statistics(순서통계량)**
        - 최소에서 최대까지 정렬된 데이터 값에 따른 계량형
    - **percentile(백분위수)**
        - 어떤 값들의  P퍼센트가 이 값 혹은 더 작은 값을 갖고, (100-P)퍼센트가 이 값 혹은 더 큰 값을 갖도록 하는 값(분위수)
    - **IQR(Interquatile range, 사분위범위)**
        - 75번쨰 백분위수와 25번쨰 백분위 수 사이의 차이

    ## 1.4.1 표준편차와 관련 추정 값들

    - **편차**

        변이 추정들은 관측 데이터와 위치 추정값 사이의 차이

        - ex)

            [1, 4, 4] 

            mean ⇒ 3

            median ⇒ 4

            - deviation
                - 1-3 = -2
                - 4-3 = 1
                - 4-3 = 1

        **편차는 중앙값 주변으로 얼마나 퍼저있는지 표현해준다.**

    - **변이를 측정**하는 **한가지 방법**은 이러한 **편차들의** **대푯값을 추정하는 것**
    - 평균을 기준으로 편차의 합은 항상 0이 된다
        - 그래서 편차의 평균을 구하는 일은 무의미하다.
        - 다른 방법 편차의 절댓값의 평균을 구한다.
    - **평균절대편차**
        - 편차의 절댓값의 평균
        - [2,1,1]
            - mean = 1.33
            - (0.7 + 0.27 + 0.27 )/ 3

        ![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%207.png)

    - **분산**
        - 제곱편차를 이용
        - 편차의 제곱 합의 평균(n-1로 나눔)

        ![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%208.png)

    - **표준편차**
        - 관측치에 평균을 뺀 편차에
        - 편차의 평균(편차 총합을 n-1로 나눔)을 낸다.
        - 그렇게 나온 것이 분산
        - 표준편차는 분산의 제곱근
        - 원래 데이터와 같은 scale에 있기에 분산보다 해석하기 쉽다.

        ![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%209.png)

    - **defrees of freedom(자유도)**
        - 통계학에서 자유도(自由度, degrees of freedom,df)는 **통계적 추정을 할 때** **표본자료** 중 **모집단**에 대한 **정보를 주는 독립적인 자료의 수**

    ## 1.4.2 백분위수에 기초한 추정

    - **순서통계량**

        정렬 데이터를 나타내는 통계량

        가장 기본이 되는 **측도**는 **가장 큰 값과 작은 값의 차이를 나타내는 범위**

    - **특잇값**에 **민감한 것을 피하**기 위해 **양극단 제거**
    - **백분위수**
        - P번째 백분위수는 P퍼센트의 값
        - 정확한 백분위 수를 계산하기 위해 정렬하는 것은 많은 연산을 필요로 한다.
    - IQR 사분위 범위
        - 변이를 측정하는 가장 대표적인 방법
        - 25, 75번째 백분위수의 차이를 보는 것

    ## 1.4.3 예제: 주별 인구의 변이추정

    ![Untitled](Ch01%20EDA(Exploratory%20data%20analysis)/Untitled%2010.png)

```r
> sd(state[['Population']]
> IQR(state[['Population']]
> mad(state[['Population']]
```

```r
state['Population'].std()
state['Population'].quantile(0.75) - state['Population'].quantile(0.25)
robust.scale.mad(state['Population'])
```

# 1.5 데이터 분포 탐색하기

# 1.6 이진 데이터와 범주 데이터 탐색하기

# 1.7 상관관계

# 1.8 두개 이상의 변수 탐색하기

> 출처

**Practical Statistics for Data Scientist**